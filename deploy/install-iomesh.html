<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Install IOMesh · Documentation</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Quick Installation Guide"/><meta name="docsearch:version" content="0.10.1"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Install IOMesh · Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="http://docs.iomesh.com/"/><meta property="og:description" content="## Quick Installation Guide"/><meta property="og:image" content="http://docs.iomesh.com/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="http://docs.iomesh.com/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/IOMesh_logo_on_white.svg" alt="Documentation"/><h2 class="headerTitleWithLogo">Documentation</h2></a><a href="/versions"><h3>0.10.1</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://www.iomesh.com" target="_self">Back to IOMesh Home</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Deploy</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">About IOMesh</h3><ul class=""><li class="navListItem"><a class="navItem" href="/about-iomesh/introduction">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Deploy</h3><ul class=""><li class="navListItem"><a class="navItem" href="/deploy/prerequisites">Prerequisites</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/deploy/install-iomesh">Install IOMesh</a></li><li class="navListItem"><a class="navItem" href="/deploy/setup-iomesh">Setup IOMesh</a></li><li class="navListItem"><a class="navItem" href="/deploy/setup-storageclass">Setup StorageClass</a></li><li class="navListItem"><a class="navItem" href="/deploy/setup-snapshotclass">Setup SnapshotClass</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Volume Operations</h3><ul class=""><li class="navListItem"><a class="navItem" href="/volume-operations/create-volume">Create Volume</a></li><li class="navListItem"><a class="navItem" href="/volume-operations/expand-volume">Expand Volume</a></li><li class="navListItem"><a class="navItem" href="/volume-operations/snapshot-restore-and-clone">Snapshot, Restore And Clone</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">IOMesh Operations</h3><ul class=""><li class="navListItem"><a class="navItem" href="/iomesh-operations/monitoring">Monitoring</a></li><li class="navListItem"><a class="navItem" href="/iomesh-operations/cluster-operations">Cluster Operations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Stateful Applications</h3><ul class=""><li class="navListItem"><a class="navItem" href="/stateful-applications/iomesh-for-mysql">IOMesh for MySQL</a></li><li class="navListItem"><a class="navItem" href="/stateful-applications/iomesh-for-cassandra">IOMesh for Cassandra</a></li><li class="navListItem"><a class="navItem" href="/stateful-applications/iomesh-for-mongodb">IOMesh for MongoDB</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Additional Info</h3><ul class=""><li class="navListItem"><a class="navItem" href="/additional-info/performance-testing">Performance Testing</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Install IOMesh</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="quick-installation-guide"></a><a href="#quick-installation-guide" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quick Installation Guide</h2>
<p>Choose the right script to execute according to your OS distribution:</p>
<blockquote>
<p><strong><em>NOTE</em>: Helm3 would be installed automatically if it is not founded.</strong></p>
</blockquote>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-7-tab-8" class="nav-link active" data-group="group_7" data-tab="tab-group-7-content-8">RHEL7/CentOS7</div><div id="tab-group-7-tab-9" class="nav-link" data-group="group_7" data-tab="tab-group-7-content-9">RHEL8/CentOS8/CoreOS</div></div><div class="tab-content"><div id="tab-group-7-content-8" class="tab-pane active" data-group="group_7" tabindex="-1"><div><span><pre><code class="hljs css language-shell"><span class="hljs-meta">#</span><span class="bash"> Every node running IOMesh must have an IP address belongs to IOMESH_DATA_CIDR</span><br />export IOMESH_DATA_CIDR=10.234.1.0/24; curl -sSL https://iomesh.run/install_iomesh_el7.sh | sh -<br /></code></pre>
</span></div></div><div id="tab-group-7-content-9" class="tab-pane" data-group="group_7" tabindex="-1"><div><span><pre><code class="hljs css language-shell"><span class="hljs-meta">#</span><span class="bash"> Every node running IOMesh must have an IP address belongs to IOMESH_DATA_CIDR</span><br />export IOMESH_DATA_CIDR=10.234.1.0/24; curl -sSL https://iomesh.run/install_iomesh_el8.sh | sh -<br /></code></pre>
</span></div></div></div></div>
<p>Then wait until all IOMesh Cluster pods are ready:</p>
<pre><code class="hljs css language-shell">watch kubectl get --namespace iomesh-system pods
</code></pre>
<p>Now IOMesh has been installed successfully!</p>
<blockquote>
<p><strong><em>NOTE</em>: If any error occurs during the installation process, the IOMesh resources which installed by the script will be reserved for troubleshooting. You can use the uninstall script to clean up all IOMesh resources installed in the k8s cluster:
<code>curl -sSL https://iomesh.run/uninstall_iomesh.sh | sh -</code></strong></p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="customized-installation-guide"></a><a href="#customized-installation-guide" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customized Installation Guide</h2>
<p>This is the sophisticated installtion guide for customized configurations.</p>
<h3><a class="anchor" aria-hidden="true" id="install-csi-snapshotter"></a><a href="#install-csi-snapshotter" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install CSI Snapshotter</h3>
<p>The <a href="https://github.com/kubernetes-csi/external-snapshotter">CSI snapshotter</a> is part of Kubernetes implementation of Container Storage Interface (CSI).
Instasll CSI snapshotter to enable Volume Snapshot feature.</p>
<blockquote>
<p><strong><em>NOTE</em>: CSI Snapshotter should be installed once per cluster</strong></p>
</blockquote>
<ol>
<li><p>Download and extract CSI external-snapshotter:</p>
<pre><code class="hljs css language-shell">curl -LO https://github.com/kubernetes-csi/external-snapshotter/archive/release-2.1.tar.gz
tar -xf release-2.1.tar.gz &amp;&amp; cd external-snapshotter-release-2.1
</code></pre></li>
<li><p>Install Snapshot CRDs:</p>
<pre><code class="hljs css language-shell">kubectl create -f ./config/crd
</code></pre></li>
<li><p>Edit <code>deploy/kubernetes/snapshot-controller/rbac-snapshot-controller.yaml</code> by adding a namespace, eg. <code>kube-system</code>:</p>
<pre><code class="hljs css language-shell">sed -i "s/namespace: default/namespace: kube-system/g" deploy/kubernetes/snapshot-controller/rbac-snapshot-controller.yaml
</code></pre></li>
<li><p>Install snapshot controller, eg. <code>kube-system</code>:</p>
<pre><code class="hljs css language-shell">kubectl apply -n kube-system -f ./deploy/kubernetes/snapshot-controller
</code></pre></li>
<li><p>Wait until snapshot controller is ready:</p>
<pre><code class="hljs css language-shell">kubectl get sts snapshot-controller -n kube-system
</code></pre>
<pre><code class="hljs css language-output">NAME                  READY   AGE
snapshot-controller   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     <span class="hljs-number">32</span>s
</code></pre></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="install-helm3"></a><a href="#install-helm3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Helm3</h3>
<blockquote>
<p><strong><em>NOTE</em>: skip this step if Helm3 is already installed.</strong></p>
</blockquote>
<pre><code class="hljs css language-shell">curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3
chmod 700 get_helm.sh
./get_helm.sh
</code></pre>
<p>For more details please refer to <strong><a href="https://helm.sh/docs/intro/install/">Install Helm</a></strong>.</p>
<h3><a class="anchor" aria-hidden="true" id="setup-helm-repo"></a><a href="#setup-helm-repo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup Helm Repo</h3>
<pre><code class="hljs css language-shell">helm repo add iomesh http://iomesh.com/charts
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="install-iomesh-operator"></a><a href="#install-iomesh-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install IOMesh Operator</h3>
<ol>
<li><p>Download <code>iomesh-operator.yaml</code> with default configurations:</p>
<pre><code class="hljs css language-shell">helm show values iomesh/operator &gt; iomesh-operator.yaml
</code></pre></li>
<li><p>Customize the <code>iomesh-operator.yaml</code></p></li>
<li><p>Install IOMesh Operator:</p>
<blockquote>
<p><strong><em>NOTE</em>: replace <code>my-iomesh-operator</code> with your release name.</strong></p>
</blockquote>
<pre><code class="hljs css language-shell">helm install my-iomesh-operator iomesh/operator \
            --create-namespace \
            --namespace iomesh-system \
            --values iomesh-operator.yaml \
            --wait 
</code></pre>
<pre><code class="hljs css language-output">NAME: my-iomesh-operator
LAST DEPLOYED: Wed Jun 30 15:06:12 2021
NAMESPACE: iomesh-system
STATUS: deployed
REVISION: 1
<span class="hljs-keyword">TEST </span>SUITE: None
</code></pre></li>
<li><p>You can run <code>kubectl --namespace iomesh-system get pods</code> to check out the result:</p>
<pre><code class="hljs css language-bash">kubectl --namespace iomesh-system get pods
</code></pre>
<pre><code class="hljs css language-output">NAME                                                     READY   STATUS    RESTARTS   AGE
my-iomesh-operator-hostpath-provisioner-pnjhg            <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m21s
my-iomesh-operator-hostpath-provisioner-vfpmb            <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m21s
my-iomesh-operator-hostpath-provisioner-z5njn            <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m21s
my-iomesh-operator-zookeeper-operator<span class="hljs-number">-6</span>cc8564d7c-j26wl   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m21s
ndm-cluster-exporter<span class="hljs-number">-8675</span>b6f567-thxj5                    <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m21s
ndm-node-exporter<span class="hljs-number">-8</span>lgrn                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m22s
ndm-node-exporter-g96s7                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m22s
ndm-node-exporter-xfgdg                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m22s
node-disk-manager<span class="hljs-number">-9</span>c622                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m22s
node-disk-manager-vgqwm                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m22s
node-disk-manager-vm7nw                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m22s
node-disk-operator<span class="hljs-number">-7</span>c84b8bd6c-mjqq4                      <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m21s
operator<span class="hljs-number">-6</span>b87858cbd<span class="hljs-number">-8</span>qdp6                                <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m21s
operator<span class="hljs-number">-6</span>b87858cbd-lmftx                                <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m21s
operator<span class="hljs-number">-6</span>b87858cbd-sf72b                                <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m21s
</code></pre></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="install-iomesh-cluster"></a><a href="#install-iomesh-cluster" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install IOMesh Cluster</h3>
<ol>
<li><p>Download <code>iomesh-values.yaml</code> with default configurations:</p>
<pre><code class="hljs css language-shell">helm show values iomesh/iomesh &gt; iomesh-values.yaml
</code></pre></li>
<li><p>Customize the <code>iomesh-values.yaml</code></p>
<p><strong>(required)</strong> fill in the <code>dataCIDR</code> according to your network:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">chunk:</span>
  <span class="hljs-attr">dataCIDR:</span> <span class="hljs-string">"10.234.1.0/24"</span> <span class="hljs-comment"># change to your own data network CIDR</span>
</code></pre>
<p><strong>(optional)</strong> If you only want iomesh to use a part of k8s node's disks,
configure the specific node's label in the <code>chunk.podPolicy.affinity</code>, for
example:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">chunk:</span>
  <span class="hljs-attr">podPolicy:</span>
    <span class="hljs-attr">affinity:</span>
      <span class="hljs-attr">nodeAffinity:</span>
        <span class="hljs-attr">requiredDuringSchedulingIgnoredDuringExecution:</span>
          <span class="hljs-attr">nodeSelectorTerms:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">matchExpressions:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">kubernetes.io/hostname</span> <span class="hljs-comment"># specific node label's key</span>
              <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span>
              <span class="hljs-attr">values:</span>
              <span class="hljs-bullet">-</span> <span class="hljs-string">iomesh-worker-0</span> <span class="hljs-comment"># specific node label's value</span>
              <span class="hljs-bullet">-</span> <span class="hljs-string">iomesh-worker-1</span>
</code></pre>
<p>More info about pod affinity configuration rule see: <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity">pod affinity</a></p></li>
<li><p>Install IOMesh Cluster:</p>
<blockquote>
<p><strong><em>NOTE</em>: replace <code>my-iomesh</code> with your release name.</strong></p>
</blockquote>
<pre><code class="hljs css language-shell">helm install my-iomesh iomesh/iomesh \
    --create-namespace \
    --namespace iomesh-system \
    --values iomesh-values.yaml \
    --wait
</code></pre>
<pre><code class="hljs css language-output">NAME: my-iomesh
LAST DEPLOYED: Wed Jun 30 16:00:32 2021
NAMESPACE: iomesh-system
STATUS: deployed
REVISION: 1
<span class="hljs-keyword">TEST </span>SUITE: None
</code></pre></li>
<li><p>You can run <code>kubectl --namespace iomesh-system get pods</code> to check out the result:</p>
<pre><code class="hljs css language-bash">kubectl --namespace iomesh-system get pods
</code></pre>
<pre><code class="hljs css language-output">NAME                                                     READY   STATUS    RESTARTS   AGE
iomesh-iscsi-redirector<span class="hljs-number">-6</span>xlq5                            <span class="hljs-number">1</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">2</span>          <span class="hljs-number">29</span>s
iomesh-iscsi-redirector-pm75v                            <span class="hljs-number">1</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">2</span>          <span class="hljs-number">29</span>s
iomesh-iscsi-redirector-qmcfv                            <span class="hljs-number">1</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">2</span>          <span class="hljs-number">29</span>s
my-iomesh-chunk<span class="hljs-number">-0</span>                                        <span class="hljs-number">3</span>/<span class="hljs-number">3</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">28</span>s
my-iomesh-chunk<span class="hljs-number">-1</span>                                        <span class="hljs-number">3</span>/<span class="hljs-number">3</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">21</span>s
my-iomesh-chunk<span class="hljs-number">-2</span>                                        <span class="hljs-number">3</span>/<span class="hljs-number">3</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">17</span>s
my-iomesh-meta<span class="hljs-number">-0</span>                                         <span class="hljs-number">2</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">29</span>s
my-iomesh-meta<span class="hljs-number">-1</span>                                         <span class="hljs-number">2</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">29</span>s
my-iomesh-meta<span class="hljs-number">-2</span>                                         <span class="hljs-number">2</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">29</span>s
my-iomesh-operator-hostpath-provisioner-pnjhg            <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
my-iomesh-operator-hostpath-provisioner-vfpmb            <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
my-iomesh-operator-hostpath-provisioner-z5njn            <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
my-iomesh-operator-zookeeper-operator<span class="hljs-number">-6</span>cc8564d7c-j26wl   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
my-iomesh-zookeeper<span class="hljs-number">-0</span>                                    <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">90</span>s
my-iomesh-zookeeper<span class="hljs-number">-1</span>                                    <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">77</span>s
my-iomesh-zookeeper<span class="hljs-number">-2</span>                                    <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">53</span>s
ndm-cluster-exporter<span class="hljs-number">-8675</span>b6f567-thxj5                    <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
ndm-node-exporter<span class="hljs-number">-8</span>lgrn                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
ndm-node-exporter-g96s7                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
ndm-node-exporter-xfgdg                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
node-disk-manager<span class="hljs-number">-9</span>c622                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
node-disk-manager-vgqwm                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
node-disk-manager-vm7nw                                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
node-disk-operator<span class="hljs-number">-7</span>c84b8bd6c-mjqq4                      <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
operator<span class="hljs-number">-6</span>b87858cbd<span class="hljs-number">-8</span>qdp6                                <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
operator<span class="hljs-number">-6</span>b87858cbd-lmftx                                <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
operator<span class="hljs-number">-6</span>b87858cbd-sf72b                                <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">10</span>m
</code></pre></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="install-iomesh-csi-driver"></a><a href="#install-iomesh-csi-driver" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install IOMesh CSI driver</h3>
<ol>
<li><p>Download <code>iomesh-csi-driver.yaml</code> with default configurations:</p>
<pre><code class="hljs css language-shell">helm show values iomesh/csi-driver &gt; iomesh-csi-driver.yaml
</code></pre></li>
<li><p>Get IOMesh access service address</p>
<pre><code class="hljs css language-shell">kubectl -n iomesh-system get svc iomesh-access
</code></pre>
<pre><code class="hljs css language-output">NAME           <span class="hljs-built_in"> TYPE </span>       CLUSTER-IP     EXTERNAL-IP   PORT(S)                        AGE
iomesh-access   ClusterIP   10.233.27.220   &lt;none&gt;        3260/TCP,10206/TCP,10201/TCP   12m
</code></pre>
<p>get ip address in <code>CLUSTER_IP</code> section</p></li>
<li><p>Edit <code>iomesh-csi-driver.yaml</code></p>
<p>Example:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">driver:</span>
  <span class="hljs-attr">metaAddr:</span> <span class="hljs-string">"10.233.1.125:10206"</span>
</code></pre>
<blockquote>
<p><strong><strong>NOTE</strong>: For Kubernetes worker node OS is <code>CentOS8</code> or <code>CoreOS</code>, set <code>mountIscsiLock</code> to <code>true</code>. Otherwise, set it to <code>false</code>.</strong></p>
</blockquote>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">driver:</span>
  <span class="hljs-attr">node:</span>
    <span class="hljs-attr">driver:</span>
      <span class="hljs-attr">mountIscsiLock:</span> <span class="hljs-literal">true</span>
</code></pre></li>
<li><p>Install IOMesh CSI driver</p>
<blockquote>
<p><strong><em>NOTE</em>: replace <code>my-iomesh-csi-driver</code> with your release name.</strong></p>
</blockquote>
<pre><code class="hljs css language-shell">helm install my-iomesh-csi-driver iomesh/csi-driver \
    --create-namespace \
    --namespace iomesh-system \
    --values iomesh-csi-driver.yaml \
    --wait
</code></pre>
<pre><code class="hljs css language-output">NAME: my-iomesh-csi-driver
LAST DEPLOYED: Wed Jun 30 16:04:13 2021
NAMESPACE: iomesh-system
STATUS: deployed
REVISION: 1
<span class="hljs-keyword">TEST </span>SUITE: None
</code></pre></li>
<li><p>You can run <code>kubectl --namespace iomesh-system get pods</code> to check out the result:</p>
<pre><code class="hljs css language-bash">kubectl --namespace iomesh-system get pods
</code></pre>
<pre><code class="hljs css language-output">iomesh-iscsi-redirector<span class="hljs-number">-6</span>xlq5                             <span class="hljs-number">2</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">2</span>          <span class="hljs-number">3</span>m55s
iomesh-iscsi-redirector-pm75v                             <span class="hljs-number">2</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">2</span>          <span class="hljs-number">3</span>m55s
iomesh-iscsi-redirector-qmcfv                             <span class="hljs-number">2</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">2</span>          <span class="hljs-number">3</span>m55s
my-iomesh-chunk<span class="hljs-number">-0</span>                                         <span class="hljs-number">3</span>/<span class="hljs-number">3</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">3</span>m54s
my-iomesh-chunk<span class="hljs-number">-1</span>                                         <span class="hljs-number">3</span>/<span class="hljs-number">3</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">3</span>m47s
my-iomesh-chunk<span class="hljs-number">-2</span>                                         <span class="hljs-number">3</span>/<span class="hljs-number">3</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">3</span>m43s
my-iomesh-csi-driver-controller-plugin<span class="hljs-number">-7</span>c67879774<span class="hljs-number">-6</span>v4z8   <span class="hljs-number">6</span>/<span class="hljs-number">6</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">73</span>s
my-iomesh-csi-driver-controller-plugin<span class="hljs-number">-7</span>c67879774-cjnw6   <span class="hljs-number">6</span>/<span class="hljs-number">6</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">73</span>s
my-iomesh-csi-driver-controller-plugin<span class="hljs-number">-7</span>c67879774-z6wkl   <span class="hljs-number">6</span>/<span class="hljs-number">6</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">73</span>s
my-iomesh-csi-driver-node-plugin<span class="hljs-number">-2</span>cr8r                    <span class="hljs-number">3</span>/<span class="hljs-number">3</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">73</span>s
my-iomesh-csi-driver-node-plugin-qcwxf                    <span class="hljs-number">3</span>/<span class="hljs-number">3</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">73</span>s
my-iomesh-csi-driver-node-plugin-tnbpf                    <span class="hljs-number">3</span>/<span class="hljs-number">3</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">73</span>s
my-iomesh-meta<span class="hljs-number">-0</span>                                          <span class="hljs-number">2</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">3</span>m55s
my-iomesh-meta<span class="hljs-number">-1</span>                                          <span class="hljs-number">2</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">3</span>m55s
my-iomesh-meta<span class="hljs-number">-2</span>                                          <span class="hljs-number">2</span>/<span class="hljs-number">2</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">3</span>m55s
my-iomesh-operator-hostpath-provisioner-pnjhg             <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
my-iomesh-operator-hostpath-provisioner-vfpmb             <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
my-iomesh-operator-hostpath-provisioner-z5njn             <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
my-iomesh-operator-zookeeper-operator<span class="hljs-number">-6</span>cc8564d7c-j26wl    <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
my-iomesh-zookeeper<span class="hljs-number">-0</span>                                     <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">4</span>m56s
my-iomesh-zookeeper<span class="hljs-number">-1</span>                                     <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">4</span>m43s
my-iomesh-zookeeper<span class="hljs-number">-2</span>                                     <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">4</span>m19s
ndm-cluster-exporter<span class="hljs-number">-8675</span>b6f567-thxj5                     <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
ndm-node-exporter<span class="hljs-number">-8</span>lgrn                                   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
ndm-node-exporter-g96s7                                   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
ndm-node-exporter-xfgdg                                   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
node-disk-manager<span class="hljs-number">-9</span>c622                                   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
node-disk-manager-vgqwm                                   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
node-disk-manager-vm7nw                                   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
node-disk-operator<span class="hljs-number">-7</span>c84b8bd6c-mjqq4                       <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
operator<span class="hljs-number">-6</span>b87858cbd<span class="hljs-number">-8</span>qdp6                                 <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
operator<span class="hljs-number">-6</span>b87858cbd-lmftx                                 <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
operator<span class="hljs-number">-6</span>b87858cbd-sf72b                                 <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">12</span>m
</code></pre></li>
</ol>
<p>IOMeshCluster now install successed, go to <a href="/deploy/setup-iomesh">Setup IOMesh</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/deploy/prerequisites"><span class="arrow-prev">← </span><span>Prerequisites</span></a><a class="docs-next button" href="/deploy/setup-iomesh"><span>Setup IOMesh</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#quick-installation-guide">Quick Installation Guide</a></li><li><a href="#customized-installation-guide">Customized Installation Guide</a><ul class="toc-headings"><li><a href="#install-csi-snapshotter">Install CSI Snapshotter</a></li><li><a href="#install-helm3">Install Helm3</a></li><li><a href="#setup-helm-repo">Setup Helm Repo</a></li><li><a href="#install-iomesh-operator">Install IOMesh Operator</a></li><li><a href="#install-iomesh-cluster">Install IOMesh Cluster</a></li><li><a href="#install-iomesh-csi-driver">Install IOMesh CSI driver</a></li></ul></li></ul></nav></div><footer id="footer" class="nav-footer"><div class="footerWrapper"><div class="">IOMesh</div><div class="linkList"><a class="footerLink" href="https://iomesh.com/spec">Spec</a><a class="footerLink" href="http://docs.iomesh.com/next/about-iomesh/introduction" target="_blank" rel="noreferrer">Docs</a><a class="footerLink" href="https://iomesh.com/contact">Contact Us</a><a class="footerLink" href="https://iomesh.com/privacy">Privacy Policy</a><span class=""> | </span><a class="footerLink" href="https://join.slack.com/t/slack-vcm1551/shared_invite/zt-nx33ud5h-~0D_MD5kL0sUrwslB~KF_A" target="_blank" rel="noreferrer">Slack</a><a class="footerLink" href="https://twitter.com/iomeshhq" target="_blank" rel="noreferrer">Twitter</a><a class="footerLink" href="https://www.youtube.com/channel/UCJV59ZDxjm822LK_oUhi7qA" target="_blank" rel="noreferrer">YouTube</a></div></div></footer></div></body></html>